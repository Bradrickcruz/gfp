"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTransaction=exports.deleteTransaction=exports.updateTransaction=exports.findTransactionByField=exports.findOneTransaction=exports.findAllTransactions=void 0;var _transactionModel=_interopRequireDefault(require("../models/transactionModel.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function asyncGeneratorStep(e,n,r,t,a,o,s){try{var c=e[o](s),i=c.value}catch(e){return void r(e)}c.done?n(i):Promise.resolve(i).then(t,a)}function _asyncToGenerator(c){return function(){var e=this,s=arguments;return new Promise(function(n,r){var t=c.apply(e,s);function a(e){asyncGeneratorStep(t,n,r,a,o,"next",e)}function o(e){asyncGeneratorStep(t,n,r,a,o,"throw",e)}a(void 0)})}}var findAllTransactions=function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function e(n,r){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_transactionModel.default.find({});case 3:t=e.sent,r.send({docs:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.status(500).send(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(e,n){return r.apply(this,arguments)}}();exports.findAllTransactions=findAllTransactions;var findOneTransaction=function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function e(n,r){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.params.id,e.prev=1,e.next=4,_transactionModel.default.findById(t);case 4:t=e.sent,r.send({doc:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r.status(500).send({error:e.t0});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(e,n){return r.apply(this,arguments)}}();exports.findOneTransaction=findOneTransaction;var findTransactionByField=function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function e(n,r){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.params,t=a.field,a=a.search,a=_defineProperty({},t,{$regex:".*".concat(decodeURIComponent(a),".*")}),e.prev=2,e.next=5,_transactionModel.default.find(a);case 5:a=e.sent,r.send({docs:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),r.status(500).send({error:e.t0});case 12:case"end":return e.stop()}},e,null,[[2,9]])}));return function(e,n){return r.apply(this,arguments)}}();exports.findTransactionByField=findTransactionByField;var updateTransaction=function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function e(n,r){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.params.id,a=n.body,e.prev=2,e.next=5,_transactionModel.default.findOneAndUpdate(t,a);case 5:e.sent.save(),r.send(!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),r.status(500).send({res:!1,error:e.t0});case 13:case"end":return e.stop()}},e,null,[[2,10]])}));return function(e,n){return r.apply(this,arguments)}}();exports.updateTransaction=updateTransaction;var createTransaction=function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function e(n,r){var t,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.body,e.prev=1,e.next=4,new _transactionModel.default(t);case 4:return a=e.sent,e.next=7,a.save();case 7:r.send({newDoc:a}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),r.status(500).send({error:e.t0});case 13:case"end":return e.stop()}},e,null,[[1,10]])}));return function(e,n){return r.apply(this,arguments)}}();exports.createTransaction=createTransaction;var deleteTransaction=function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function e(n,r){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.params.id,e.prev=1,e.next=4,_transactionModel.default.findByIdAndDelete(t);case 4:r.send(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),r.status(500).send(!1);case 10:case"end":return e.stop()}},e,null,[[1,7]])}));return function(e,n){return r.apply(this,arguments)}}();exports.deleteTransaction=deleteTransaction;